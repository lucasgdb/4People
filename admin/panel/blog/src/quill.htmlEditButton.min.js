!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/dist/",b(b.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"htmlEditButton\", function() { return htmlEditButton; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar htmlEditButton = function htmlEditButton(quill, options) {\n  _classCallCheck(this, htmlEditButton);\n\n  // Add button to all quill toolbar instances\n  quill.container.parentElement.querySelectorAll(\".ql-toolbar\").forEach(function (toolbarEl) {\n    var buttonContainer = document.createElement(\"span\");\n    buttonContainer.setAttribute(\"class\", \"ql-formats\");\n    var button = document.createElement(\"button\");\n    button.innerHTML = \"HTML\";\n button.style.color = \"#444444\";\n   button.title = \"Ver c\xF3digo-fonte HTML\";\n    button.onclick = function (e) {\n      e.preventDefault();\n      launchPopupEditor(quill);\n    };\n    buttonContainer.appendChild(button);\n    toolbarEl.appendChild(buttonContainer);\n  });\n};\n\nfunction launchPopupEditor(quill) {\n  var htmlFromEditor = quill.container.querySelector(\".ql-editor\").innerHTML;\n  var popupContainer = document.createElement(\"div\");\n  var overlayContainer = document.createElement(\"div\");\n  overlayContainer.setAttribute(\"style\", \"background: #0000007d; position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9999;\");\n  popupContainer.setAttribute(\"style\", \"background: #eeeee; margin: 40px; border-radius: 10px;\");\n  var title = document.createElement(\"i\");\n  title.setAttribute(\"style\", \"margin: 0; display: block; font-size:20px\");\n  title.innerText = 'Edite o c\xF3digo HTML abaixo, ent\xE3o pressione salvar.';\n  var textContainer = document.createElement(\"div\");\n  textContainer.appendChild(title);\n  textContainer.setAttribute(\"style\", \"background: #eeeeee;position: relative; width: 100%; height: 100%; padding: 20px;\");\n  var textArea = document.createElement(\"textarea\");\n  textArea.setAttribute(\"style\", \"background:white;min-height:350px;resize:vertical;overflow-y:scroll;outline:0;border:.5px solid rgb(190, 190, 190);color:#333;font-size:17px\");\n  textArea.value = lblQuillContent.innerHTML;\n  var buttonCancel = document.createElement(\"button\");\n  buttonCancel.innerHTML = \"Cancelar\";\n buttonCancel.classList.add(\"btn\", \"waves-effect\", \"dark-grey\", \"mt-2\");\n  buttonCancel.setAttribute(\"style\", \"margin-right: 20px;\");\n  var buttonOk = document.createElement(\"button\");\n buttonOk.classList.add(\"btn\", \"waves-effect\", \"btn-green\", \"mt-2\");\n  buttonOk.innerHTML = \"Salvar\";\n  var buttonGroup = document.createElement(\"div\");\n  buttonGroup.setAttribute(\"style\", \"\");\n  buttonGroup.appendChild(buttonCancel);\n  buttonGroup.appendChild(buttonOk);\n  textContainer.appendChild(textArea);\n  textContainer.appendChild(buttonGroup);\n  popupContainer.appendChild(textContainer);\n  overlayContainer.appendChild(popupContainer);\n  document.body.appendChild(overlayContainer);\n\n  buttonCancel.onclick = function () {\n    document.body.removeChild(overlayContainer);\n  };\n  overlayContainer.onclick = buttonCancel.onclick;\n  popupContainer.onclick = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  buttonOk.onclick = function () {\n    var noNewlines = textArea.value;\n    quill.container.querySelector(\".ql-editor\").innerHTML = noNewlines;\n    document.body.removeChild(overlayContainer);\n  };\n}\n\n// Adapted FROM jsfiddle here: https://jsfiddle.net/buksy/rxucg1gd/\nfunction formatHTML(code) {\n  \"use strict\";\n\n  var stripWhiteSpaces = true;\n  var stripEmptyLines = true;\n  var whitespace = \" \".repeat(2); // Default indenting 4 whitespaces\n  var currentIndent = 0;\n  var newlineChar = \"\\n\";\n  var char = null;\n  var nextChar = null;\n\n  var result = \"\";\n  for (var pos = 0; pos <= code.length; pos++) {\n    char = code.substr(pos, 1);\n    nextChar = code.substr(pos + 1, 1);\n\n    // If opening tag, add newline character and indention\n    if (char === \"<\" && nextChar !== \"/\") {\n      result += newlineChar + whitespace.repeat(currentIndent);\n      currentIndent++;\n    }\n    // if Closing tag, add newline and indention\n    else if (char === \"<\" && nextChar === \"/\") {\n        // If there're more closing tags than opening\n        if (--currentIndent < 0) currentIndent = 0;\n        result += newlineChar + whitespace.repeat(currentIndent);\n      }\n\n      // remove multiple whitespaces\n      else if (stripWhiteSpaces === true && char === \" \" && nextChar === \" \") char = \"\";\n        // remove empty lines\n        else if (stripEmptyLines === true && char === newlineChar) {\n            //debugger;\n            if (code.substr(pos, code.substr(pos).indexOf(\"<\")).trim() === \"\") char = \"\";\n          }\n\n    result += char;\n  }\n\n  return result;\n}\n\nwindow.htmlEditButton = htmlEditButton;\n/* harmony default export */ __webpack_exports__[\"default\"] = (htmlEditButton);\n\n\n//# sourceURL=webpack:///./src/quill.htmlEditButton.js?")}]);
